# 🦁 먹이사슬 (Food Chain) - 공식 게임 규칙서

본 문서는 '더 지니어스: 먹이사슬'을 웹 게임으로 구현하기 위한 최종 규칙을 정의합니다. 모든 시스템 로직은 이 문서의 정의를 따릅니다.

## 1. 게임 기본 정보
* **참가 인원**: 13명 (대기열 충족 시 자동 시작)
* **익명성**: 모든 플레이어는 게임 시작 시 무작위로 '더 지니어스' 관련 별명(예: 가버낫, 숲들숲들, 콩, 윈드밀 등)을 부여받습니다.
* **승리 조건**: 각 동물이 가진 고유 조건을 충족한 모든 플레이어가 공동 우승합니다.

---

## 2. 동물 역할 및 능력 (Roles)

### 2-1. 포식자 (Predators)
포식자는 매 라운드 다른 동물을 '포식'해야 생존할 수 있습니다.

| 동물 | 서열 | 거주지 | 기아 한계 | 승리 조건 | 특이사항 |
| :--- | :---: | :--- | :---: | :--- | :--- |
| **사자** | 1 | 들 | 1R | 생존 | 하늘 이동 불가. 한 라운드라도 굶으면 사망. |
| **악어** | 2 | 강 | 2R | 생존 | 하늘 이동 불가. 두 라운드 연속 굶으면 사망. |
| **독수리** | 3 | 하늘 | 2R | 생존 | 모든 지역 이동 가능. 두 라운드 연속 굶으면 사망. |
| **하이에나**| 4 | 들 | 3R | 사자의 사망 | 하늘 이동 불가. 세 라운드 연속 굶으면 사망. 사자 사망 시 생존 여부 무관하게 승리. |

### 2-2. 피식자 및 특수 동물 (Preys & Specials)

| 동물 | 서열 | 거주지 | 승리 조건 | 특이사항 |
| :--- | :---: | :--- | :--- | :--- |
| **뱀** | 5 | 숲 | 9명 이상 사망 | 하늘 이동 불가. 공격 불가. **뱀을 공격한 동물은 즉시 사망 (뱀은 생존).** |
| **카멜레온**| - | 숲 | 생존 | 하늘 이동 불가. 전략 회의 중 위장할 동물을 선택함. |
| **쥐** | - | 숲 | 사자의 승리 | 하늘 이동 불가. 사자가 승리 조건을 달성하면 함께 우승. |
| **악어새** | - | 강 | 악어의 승리 | 모든 지역 이동 가능. 악어가 승리 조건을 달성하면 함께 우승. |
| **까마귀** | - | 하늘 | 예측 동물 승리 | 모든 지역 이동 가능. 시작 전 승리 예측 대상 1명 지목. **엿보기 2회 가능.** |
| **청둥오리**| - | 하늘 | 생존 | 모든 지역 이동 가능. (피식자 연합 능력 보유) |
| **수달** | - | 강 | 생존 | 하늘 이동 불가. (피식자 연합 능력 보유) |
| **사슴** | - | 들 | 생존 | 하늘 이동 불가. (피식자 연합 능력 보유) |
| **토끼** | - | 숲 | 생존 | 하늘 이동 불가. (피식자 연합 능력 보유) |

> **※ 피식자 연합 (공동구역 능력):** 사슴, 수달, 토끼, 청둥오리 4마리가 **모두 생존**한 상태에서 **동일한 구역**에 모여 있다면, 해당 라운드에는 어떤 공격을 받아도 죽지 않습니다.

---

## 3. 게임 진행 단계 (Game Flow)

### Phase 1: 전략 회의 (60초)
게임 시작 직후 모든 플레이어가 대기실에서 대화하며 특수 능력을 사용합니다.
1.  **특수 능력 설정**:
    * **카멜레온**: 위장하고 싶은 동물을 목록에서 선택합니다.
    * **까마귀**: 우승을 예측할 플레이어 1명을 지목합니다.
2.  **엿보기 (Peeking)**:
    * 모든 플레이어는 다른 플레이어 1명의 정체를 엿볼 수 있습니다. (카멜레온을 엿보면 위장한 동물로 보입니다.)
    * **까마귀**는 총 2번의 엿보기가 가능합니다.
3.  **채팅 및 귓속말**:
    * 자유로운 채팅이 가능하며, `/귓 {닉네임} {할말}` 명령어로 귓속말이 가능합니다.
    * 귓속말 발생 시 전체 채팅창에 **"A님이 B님에게 귓속말을 보냈습니다."**라는 알림이 뜹니다.
4.  **이동 예약**: 1라운드에 갈 장소를 미리 선택할 수 있습니다.

### Phase 2: 장소 이동 (10초)
* 플레이어는 강, 하늘, 들, 숲 중 한 곳을 최종 선택합니다.
* **거주지 복귀 규칙**: 자신의 주 거주지가 아닌 곳에서 라운드를 보냈다면, 다음 라운드에는 **무조건 주 거주지로 이동**해야 합니다.
* 미선택 시 자동으로 자신의 **주 거주지**로 이동됩니다.

### Phase 3: 라운드 활동 (60초)
각 지역별로 실시간 공격과 채팅이 이루어집니다.
1.  **지역 채팅**: 같은 지역에 있는 플레이어들끼리만 채팅이 보입니다.
2.  **실시간 공격 (선빵 시스템)**:
    * /공격 플레이어 로 공격할 대상을 선택합니다. 한 라운드에 한 번만 공격할 수 있습니다.
    * **공격 판정**:
        * **나 > 상대 (하위 서열)**: 상대방 사망.
        * **나 < 상대 (상위 서열)**: **공격자(나)가 역으로 잡아먹혀 사망.**
        * **나 == 상대 (동급)**: 무효. "아무 일도 일어나지 않았습니다." 메시지 출력.
        * **뱀 공격**: 공격자가 즉시 사망하고 뱀은 생존합니다.
3.  **사망 알림**:
    * 같은 지역: 누가 누구를 죽였는지 상세 메시지가 뜹니다.
                "OOO님이 XXX님을 공격했습니다. XXX님이 사망했습니다."
                "OOO님이 XXX님을 공격했습니다. OOO님이 사망했습니다."
                "OOO님이 XXX님을 공격했습니다. 아무 일도 없었습니다."

    * 다른 지역: "OOO님이 사망했습니다."라는 결과만 공지됩니다.(사망의 경우에만 출력됩니다.)
    * 사망자는 즉시 **묘지(Graveyard)** 채팅방으로 격리됩니다.

### Phase 4: 정산 및 라운드 반복
* 4라운드까지 Phase 2와 3를 반복합니다.
* 라운드 종료 시 포식자의 굶주림 상태를 체크하여 기아 한계 도달 시 사망 처리합니다.

---

## 4. 게임 종료 및 결과 발표

1.  **최종 결과**: 4라운드 종료 후 생존자 및 승리 조건 달성자를 발표합니다.
2.  **직업 공개**: 승리자의 닉네임과 함께 실제 동물 정체를 모두에게 공개합니다.
3.  **남탓 타임 (15초)**: 모든 플레이어가 다시 전체 채팅방으로 모여 자유롭게 대화한 후 대기실로 퇴장합니다.